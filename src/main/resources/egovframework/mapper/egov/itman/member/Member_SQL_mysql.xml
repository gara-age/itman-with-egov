<?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper
                PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberDAO">
<select id="countByEmail" parameterType="string" resultType="int">
    SELECT
        COUNT(*)
    FROM
        ITM_MEMBER
    WHERE
        DEL_YN = 'N'
    AND MEM_MAIL = #{email}
</select>

    <select id="selectMemberByEmail" parameterType="string" resultType="memberVO">
        SELECT
            MEM_IDX AS memIdx,
            MEM_NAME AS memName,
            MEM_MAIL AS memMail,
            MEM_TEL AS memTel,
            MEM_PW AS memPw
        FROM
            ITM_MEMBER
        WHERE
            DEL_YN = 'N'
          AND MEM_MAIL = #{inputMail}
    </select>

    <insert id="insertMember" parameterType="memberVO">
        INSERT INTO
        ITM_MEMBER(
                   MEM_NAME,
                   MEM_MAIL,
                   MEM_PW,
                   MEM_TEL,
                   REG_DATE
        )
        VALUES(
               #{memName},
               #{memMail},
               #{memPw},
               #{memTel},
               NOW()
              )
    </insert>

    <update id="updateMemTel" parameterType="memberVO">
        UPDATE
        ITM_MEMBER
        SET
            MEM_TEL = #{memTel},
            MOD_DATE = NOW()
        WHERE
            MEM_IDX = #{memIdx}
    </update>
    <update id="updateMemPw" parameterType="memberVO">
        UPDATE
        ITM_MEMBER
        SET
            MEM_PW = #{memPw},
            MOD_DATE = NOW()
        WHERE
            MEM_IDX = #{memIdx}
    </update>
    <update id="deleteMember" parameterType="memberVO">
        UPDATE
            ITM_MEMBER
        SET
            DEL_YN = 'Y',
            DEL_DATE = NOW()
        WHERE
            MEM_IDX = #{memIdx}
    </update>

    <select id="findMail" parameterType="memberVO" resultType="memberVO">
        SELECT
            MEM_MAIL
        FROM
            ITM_MEMBER
        WHERE
            DEL_YN = 'N'
        AND MEM_NAME = #{memName}
        AND MEM_TEL = #{memTel}
    </select>
    <select id="findPass" parameterType="memberVO" resultType="memberVO">
        SELECT
            MEM_MAIL
        FROM
            ITM_MEMBER
        WHERE
            DEL_YN = 'N'
          AND MEM_NAME = #{memName}
          AND MEM_TEL = #{memTel}
          AND MEM_MAIL = #{memMail}
    </select>
</mapper>